<!--@layout(/layout/basic/layout.html)-->
<!--@css(/layout/basic/css/index.css)-->
<!--@css(/layout/basic/css/aos.css)-->
<script src="/js/aos.js"></script>
<article id="bvtHome">
    <!--보터 카운트-->
    <section id="indexUserCnt" class="index_user">
        <div id="joinbanner" class="joinbanner"><span>🌞 </span> 비보트에서 <em class="membercnt"></em><em>명</em>이 가치소비를 함께하는
            중!
        </div>
    </section>
    <!--보터 카운트-->
    <!-- 메인 사각 배너 -->
    <div id="indexSquareBanner">
        <ul class="square_banner swiper-wrapper">
            <li class="swiper-slide">
                <a href="/product/detail.html?product_no=2809" title="페트병 35개가 맨투맨으로 쓰임 있게 / 가볍고 편안한 핏, 친환경 롱 슬리브"><img
                        src="/bvtIMG/banner/indexbanner/230111_index_banner_1.png"></a>
            </li>
            <li class=" swiper-slide">
                <a href="/product/detail.html?product_no=3299" title="구매 만족도 99% 팔팔한 바다를 위한 캘린더 새해 준비, 곧 기부가 되니까"><img
                        src="/bvtIMG/banner/indexbanner/230111_index_banner_2.png"
                        alt="구매 만족도 99% 팔팔한 바다를 위한 캘린더 새해 준비, 곧 기부가 되니까"></a>
            </li>
            <li class="swiper-slide">
                <a href="/product/detail.html?product_no=3123" title="지구도 지키고 핸드폰도 지키는 방법 다시 쓰는 리사이클 투명 폰케이스"><img
                        src="/bvtIMG/banner/indexbanner/230111_index_banner_3.png"
                        alt="지구도 지키고 핸드폰도 지키는 방법 다시 쓰는 리사이클 투명 폰케이스"></a>
            </li>
        </ul>
        <div class="swiper-pagination img_pagination"></div>
    </div>
    <!-- 메인진열 섹션 -->
    <section id="indexListmain" class="index_list">
        <!-- 최상단 -->
        <div id="listmainTopValue" class="listmain">
            <h3>2023년 맞이<br>소중한 사람에게 선물하기</h3>
            <h4>신년 선물, 더 의미 있도록</h4>
            <div class="list_contents_wrap">
                <div class="list_item_box big_img" module="product_listmain_224">
                    <!--
                        $count = 30
                        $basket_result = /product/add_basket.html
                        $basket_option = /product/basket_option.html
                    -->
                    <!--@import(/product/product_module/listmain/listmain.html)-->
                </div>
            </div>
        </div>
        <!-- 재구매 -->
        <div id="listmainRepurchase" class="listmain">
            <h3>다시 사러 오셨군요<br>재구매 베스트</h3>
            <h4>꼭 이걸 사러 오시길래요</h4>
            <div class="list_contents_wrap right-side-control">
                <div class="list_item_box listmain_repurchase" module="product_listmain_225">
                    <!--
                        $count = 30
                        $basket_result = /product/add_basket.html
                        $basket_option = /product/basket_option.html
                    -->
                    <!--@import(/product/product_module/listmain/listmain.html)-->
                </div>

                <div class="swiper-pagination repurchase_bullet list_item_bullet"></div>
            </div>
        </div>
        <!-- 베스트 -->
        <div id="listmainBest" class="listmain">
            <h3>비보트에서<br>인기가 가장 많아요</h3>
            <h4>사랑 받는 데에는 이유가 있는 법</h4>
            <div class="list_contents_wrap right-side-control">
                <div class="list_item_box moreview best" module="product_listmain_226">
                    <!--
                        $count = 30
                        $basket_result = /product/add_basket.html
                        $basket_option = /product/basket_option.html
                    -->
                    <!--@import(/product/product_module/listmain/listmain.html)-->
                </div>
                <div class="moreview_btn_wrap">
                    <button class="moreview_btn" data-btn="best">더 보기
                        <svg class="moreview_arrow" xmlns="http://www.w3.org/2000/svg" width="10.67" height="6.59">
                            <path fill="#022cff" d="m1.25 0 4.08 4.07L9.43 0l1.25 1.25L5.34 6.6 0 1.25Z"
                                data-name="Icon material-keyboard-arrow-down" />
                        </svg>
                    </button>
                </div>
            </div>
        </div>
        <!-- 테마 -->
        <div id="listmainTheme_1" class="listmain">
            <h3>원래 돈은 가치 있는 곳에<br>담겨야 하거든요</h3>
            <h4>나를 위한 소중한 카드지갑</h4>
            <div class="list_contents_wrap right-side-control">
                <div class="list_item_box moreview theme_1" module="product_listmain_227">
                    <!--
                        $count = 30
                        $basket_result = /product/add_basket.html
                        $basket_option = /product/basket_option.html
                    -->
                    <!--@import(/product/product_module/listmain/listmain.html)-->
                </div>
                <div class="moreview_btn_wrap">
                    <button class="moreview_btn" data-btn="theme_1">더 보기
                        <svg class="moreview_arrow" xmlns="http://www.w3.org/2000/svg" width="10.67" height="6.59">
                            <path fill="#022cff" d="m1.25 0 4.08 4.07L9.43 0l1.25 1.25L5.34 6.6 0 1.25Z"
                                data-name="Icon material-keyboard-arrow-down" />
                        </svg>
                    </button>
                </div>
            </div>
        </div>
        <!-- 테마 -->
        <div id="listmainTheme_2" class="listmain">
            <h3>아직 화학 성분과 트러블에서<br>벗어나지 못했다면</h3>
            <h4>비건 비누로 걱정 없이 세안하기</h4>
            <div class="list_contents_wrap right-side-control">
                <div class="list_item_box listmain_theme2" module="product_listmain_228">
                    <!--
                        $count = 30
                        $basket_result = /product/add_basket.html
                        $basket_option = /product/basket_option.html
                    -->
                    <!--@import(/product/product_module/listmain/listmain.html)-->
                </div>
                <div class="swiper-pagination theme2_bullet list_item_bullet"></div>
            </div>
        </div>
        <!-- 테마 -->
        <div id="listmainTheme_3" class="listmain">
            <h3>올 봄엔 뭘 들지?<br>숄더 · 토트 · 크로스백 나들이</h3>
            <h4>직장인 대학생 신학기 추천</h4>
            <div class="list_contents_wrap right-side-control">
                <div class="list_item_box moreview theme_3" module="product_listmain_229">
                    <!--
                        $count = 30
                        $basket_result = /product/add_basket.html
                        $basket_option = /product/basket_option.html
                    -->
                    <!--@import(/product/product_module/listmain/listmain.html)-->
                </div>
                <div class="moreview_btn_wrap">
                    <button class="moreview_btn" data-btn="theme_3">더 보기
                        <svg class="moreview_arrow" xmlns="http://www.w3.org/2000/svg" width="10.67" height="6.59">
                            <path fill="#022cff" d="m1.25 0 4.08 4.07L9.43 0l1.25 1.25L5.34 6.6 0 1.25Z"
                                data-name="Icon material-keyboard-arrow-down" />
                        </svg>
                    </button>
                </div>
            </div>
        </div>
        <!-- 테마 -->
        <div id="listmainTheme_4" class="listmain">
            <h3>너 하나 나 하나<br>허전한 팔에 아름답게</h3>
            <h4>좋은 일에 쓰이는 우정 · 커플 팔찌</h4>
            <div class="list_contents_wrap right-side-control">
                <div class="list_item_box listmain_theme4" module="product_listmain_230">
                    <!--
                        $count = 30
                        $basket_result = /product/add_basket.html
                        $basket_option = /product/basket_option.html
                    -->
                    <!--@import(/product/product_module/listmain/listmain.html)-->
                </div>
                <div class="swiper-pagination theme4_bullet list_item_bullet"></div>

            </div>
        </div>
    </section>
    <!-- 메인진열 섹션 -->
    <!--@layout(/layout/basic/layout.html)-->
</article>
<!--@import(/layout/basic/footer.html)-->
<!--@define(cmc_log)-->
<script src="/layout/basic/js/index.js"></script>
<!-- AOS 초기화 -->
<script>
    AOS.init();
    /* 슬라이더 */
    // 상단 배너 슬라이드
    var swiper = new Swiper("#indexSquareBanner", {
        slidesPerView: 1,
        spaceBetween: 0,
        loop: true,
        autoplay: {
            delay: 3500,
            disableOnInteraction: false,
        },
        pagination: {
            el: ".img_pagination",
            clickable: true,
            type: "progressbar",
        },
    });
    // big width 250 메인진열 슬라이드
    var swiper = new Swiper(".big_img", {
        slidesPerView: 1.675,
        spaceBetween: 10,
    });
    // 재구매
    var swiper = new Swiper(".listmain_repurchase", {
        slidesPerView: 2,
        spaceBetween: 8,
        slidesPerGroup: 2,
        pagination: {
            el: ".repurchase_bullet",
            clickable: true,
        },
    });
    // 테마2
    var swiper = new Swiper(".listmain_theme2", {
        slidesPerView: 2,
        spaceBetween: 8,
        slidesPerGroup: 1,
        pagination: {
            el: ".theme2_bullet",
            clickable: true,
        },
    });
    // 테마2
    var swiper = new Swiper(".listmain_theme4", {
        slidesPerView: 2,
        spaceBetween: 8,
        slidesPerGroup: 1,
        pagination: {
            el: ".theme4_bullet",
            clickable: true,
        },
    });
</script>
<script>


    //나머지 노드 찾기
    const getSibiling = (nodearray, btn) => {
        return nodearray && [...nodearray].filter(node => node != btn);
    }

    /* 더보기 세팅 */
    const moreview_listmain = document.querySelectorAll(".moreview .prdList");
    //초기 로딩 시 4개 제외하고 모두 displaynone 처리
    const hideMoreview = () => {
        moreview_listmain.forEach(list => {
            [...list.children].forEach((item, i) => {
                i > 3 ?
                    item.classList.add("displaynone") :
                    null;

            });
        });
    };

    /* 더보기 버튼 */
    //display none인 값 모을 배열
    let none_arr = [];
    const clickMoreviewBtn = () => {
        const moreviewBtn = document.querySelectorAll(".moreview_btn");
        moreviewBtn.forEach(el => {
            el.addEventListener("click", (e) => {
                //display none이 있는 상태에서의 이벤트
                const buttonClass = e.currentTarget.dataset.btn;
                const selectList = document.querySelector(`.list_item_box.${buttonClass}>.prdList`);

                //더보기 끝났는지 체크 (item 중 display none인게 있는지 검사)
                const clickListItem = selectList.children;
                if ([...clickListItem].filter((item) => { return window.getComputedStyle(item).display === 'none' }).length != 0) {
                    //clickTagListItem 중 display가 none인 것 찾아서 4개 바꾸기
                    [...clickListItem].forEach((item) => {
                        if (window.getComputedStyle(item).display === 'none') {
                            none_arr.push(item);
                        }
                    });
                    console.log('none_arr: ', none_arr.length);

                    if (none_arr.length > 4) {
                        //index 0-3까지 4개의 상품 list flex로 변경
                        for (let i = 0; i < 4; i++) {
                            none_arr[i].classList.remove("displaynone");
                        }
                        //display none 값 가진 배열 초기화
                        none_arr = [];
                    } else if (none_arr.length < 4) {
                        console.log("none_arr", none_arr)
                        none_arr.forEach(item => {
                            item.classList.remove("displaynone");
                        });
                        //더보기 버튼 삭제
                        e.currentTarget.classList.add("displaynone");
                    }
                } else {
                    //더보기 버튼 삭제
                    e.currentTarget.classList.add("displaynone");
                }
            })
        })
    }
    window.addEventListener("DOMContentLoaded", () => {
        hideMoreview();
        clickMoreviewBtn();
    })



    /* 최종 실행 */
    // window.addEventListener("DOMContentLoaded", () => {
    //     [...recommendBtnArray].forEach((btn) => {
    //         btn.addEventListener("click", clickChangeRecommendListmainButton);
    //     });
    // })
    // window.addEventListener("DOMContentLoaded", () => {
    //     [...freedeliveryBtnArray].forEach((btn) => {
    //         btn.addEventListener("click", clickChangeFreeDeliveryListmainButton);
    //     });
    // })
    /* 최종 실행 */

</script>